# Nodex - Unofficial version of the 3X-ui Node 



<p align="center">
  <b>ููฺฏุงูโุณุงุฒ ฺฉุงูู ุงูุจุงูุฏูุง ู ฺฉูุงูุชโูุง + ููฺฏุงูโุณุงุฒ ุชุฑุงูฺฉ ุจู ุณุฑูุฑูุง</b><br>
  ุณุจฺฉุ ุงููุ ุฏุงฺฉุฑุงุฒ ุดุฏูุ ู ูุงุจูโุชูุธู ุจุง ูุงู <code>.env</code>
</p>



## โก ููููููููุฏฺฉุณ

<div dir="rtl">

ููุฏฺฉุณ ฺฉ ุณุฑูุณ ุณุจฺฉ ู ุฏุงฺฉุฑโุดุฏู ุงุณุช ฺฉู ุจูโุนููุงู ยซููุฏยป ุจุฑุง ูพูู ูุฑฺฉุฒ 3X-UI ุนูู ูโฺฉูุฏ. ุงู ุณุฑูุณ:

- ุงูุจุงูุฏูุง ู ฺฉูุงูุชโูุง ุฑุง ุงุฒ **ุณุฑูุฑ ูุฑฺฉุฒ** ุจู **ููุฏูุง** ุณูฺฉ ูโฺฉูุฏ.
- ูุตุฑู ุชุฑุงูฺฉ ฺฉูุงูุชโูุง ุฑุง ุจู ฺูุฏ ููุฏ **ุชุฌูุน ู ููฺฏุงู** ูโฺฉูุฏ.
- ุจุง API ุฑุณู ูพูู (ูุณุฑูุง `/panel/api/...`) ฺฉุงุฑ ูโฺฉูุฏ.
- ุฐุฎุฑูโุณุงุฒ ุญุงูุช/ุชุฑุงูฺฉ ุฑุง ุฏุงุฎู SQLite (ุจุง WAL) ุงูุฌุงู ูโุฏูุฏ.

</div>



## ๐ ูฺฺฏโูุง

<div dir="rtl">

- **ุณูฺฉ ฺฉุงูู ุงูุจุงูุฏูุง** (ุงุฌุงุฏ/ุจูโุฑูุฒุฑุณุงู ุฏุฑ ููุฏูุง ุจุฑ ุงุณุงุณ ูพูู ูุฑฺฉุฒ)
- **ุณูฺฉ ฺฉูุงูุชโูุง** (ุญุฐู/ุงูุฒูุฏู/ุขูพุฏุช ูุทุงุจู ุจุง ูุฑฺฉุฒ)
- **ููฺฏุงูโุณุงุฒ ุชุฑุงูฺฉ**: ุฌูุนโุฒุฏู ูุตุฑู ุงุฒ ููุฏูุง ู ุงุนูุงู ุดูุงุฑูุฏูู ฺฉูพุงุฑฺู
- **ุฏุงฺฉุฑุงุฒ ฺฉุงูู**: ุงูุฌ ฺฉูโุญุฌู Python 3.12 + `tini` + ุงุฌุฑุง ุจูโุตูุฑุช ุบุฑโุฑูุช
- **ุงูู ุจูโุตูุฑุช ูพุดโูุฑุถ**: `read_only`ุ `no-new-privileges`ุ `cap_drop: ALL`ุ `tmpfs` ุจุฑุง `/tmp`
- **Healthcheck ุฏุงุฎู**: ูุจุชู ุจุฑ ูุงู `.heartbeat`
- **ุชูุธูุงุช ุณุงุฏู**: ุงุฒ ุทุฑู `config.json` ู ูุชุบุฑูุง `.env`
- **ูุงฺฏโฺฏุฑ ุงุณุชุงูุฏุงุฑุฏ** (Stdout) + **ูุงฺฏ ูุงู** (ุงุฎุชุงุฑ ุจุง `ENABLE_FILE_LOG=1`)
- **ููุงุฒโุณุงุฒ ุฏุฑุฎูุงุณุชโูุง** ุจู ููุฏูุง (ูุงุจู ฺฉูุชุฑู ุจุง `NET_*`)

</div>



## ๐ ุณุงุฎุชุงุฑ ู ูุณุฑูุง ูพุดโูุฑุถ

<div dir="rtl">

- ุฏุงุฏูโูุง ู ุฏุชุงุจุณ:  `/var/lib/dds-nodex/data`  
- ูพฺฉุฑุจูุฏ ููุทโุฎูุงูุฏู: `/var/lib/dds-nodex/config`  
- ูุงู ูพุงฺฏุงูโุฏุงุฏู: `/var/lib/dds-nodex/data/traffic_state.db`  
- ูุงู ฺฉุงูููฺฏ: `/var/lib/dds-nodex/config/config.json`  

ุฏุฑูู ฺฉุงูุชูุฑ:  
- `DATA_DIR=/app/data`  
- `DB_FILE=/app/data/traffic_state.db`  
- `CONFIG_FILE=/app/config/config.json`

</div>



## ๐งฉ ูุงูโูุง ููููู ููู

### 1) ูููููู ฺฉุงููฺฏ (`config.sample.json`)

<div dir="rtl">

ฺฉ ฺฉูพ ุจุง ูุงู `config.json` ุฏุงุฎู ูุณุฑ ูพฺฉุฑุจูุฏ ุจุณุงุฒุฏ:

</div>

```json
{
  "central_server": {
    "url": "http://host.docker.internal:PORT/WEBPATH",
    "username": "username",
    "password": "password"
  },
  "nodes": [
    {
      "url": "http://IP:PORT/WEBPATH",
      "username": "username",
      "password": "password"
    }
  ]
}
```

</div>

**ูฺฉุชู**: ุญุชูุง ุจุฑุง ููุฏ ูุง ุฎูุฏ ุงุฒ SSL ุงุณุชูุงุฏู ฺฉูุฏ . ุนุฏู ุงุณุชูุงุฏู ุงุฒ HTTPS ุงููุช ุดูุง ุฑุง ุจู ุฎุทุฑ ู ุงูุฏุงุฒุฏ. ูุณุฑ ูพูู ูุนูููุงู ุดุจู `http://IP:PORT` ุง `https://IP:PORT/panel` ุงุณุช. `WEBPATH` ุฑุง ูุทุงุจู ูพูู ุฎูุฏ ุจฺฏุฐุงุฑุฏ.


### 2) ูุชุบุฑูุง ูุญุท (`.env`)

<div dir="rtl">



</div>

```env
SYNC_INTERVAL_MINUTES=1
# ูุงุตูู ุจู ุณฺฉูโูุง ุณูฺฉ (ุฏููู)


# ุดุจฺฉู/ูพุฑููุฑููุณ
NET_PARALLEL_NODE_CALLS=true
NET_MAX_WORKERS=12
NET_REQUEST_TIMEOUT=15
NET_CONNECT_POOL_SIZE=100
NET_VALIDATE_TTL_SECONDS=180

# ุชูุธูุงุช SQLite
DB_WAL=1
DB_SYNCHRONOUS=NORMAL   # FULL | NORMAL | OFF
DB_CACHE_SIZE_MB=64

# ูุงฺฏ ูุงู (ุบุฑูุนุงู = 0ุ ูุนุงู = 1)
ENABLE_FILE_LOG=0

# ุณุทุญ ูุงฺฏ
LOG_LEVEL=INFO

# ุณูุงูุช ุณุฑูุณ (ุซุงูู): ุญุฏุงฺฉุซุฑ ุณู .heartbeat
HEALTH_MAX_AGE=180
```

</div>

### 3) ุฏุงฺฉุฑ-ฺฉููพูุฒ

<div dir="rtl">

ู.ุฏฺฉุณ ุจุง ุงู Compose ุงุฌุฑุง ูโุดูุฏ (ุฎูุงุตูู ฺฉุงููฺฏ):

</div>

```yaml
services:
  dds-nodex:
    build: .
    image: dds-nodex:prod
    container_name: dds-nodex
    restart: unless-stopped
    environment:
      LOG_LEVEL: ${LOG_LEVEL:-INFO}
      SYNC_INTERVAL_MINUTES: ${SYNC_INTERVAL_MINUTES:-1}
      REQUEST_TIMEOUT: ${REQUEST_TIMEOUT:-10}
      DATA_DIR: /app/data
      DB_FILE: /app/data/traffic_state.db
      ENABLE_FILE_LOG: ${ENABLE_FILE_LOG:-0}
      CONFIG_FILE: /app/config/config.json
      HEALTH_MAX_AGE: ${HEALTH_MAX_AGE:-180}
    volumes:
      - /var/lib/dds-nodex/data:/app/data
      - /var/lib/dds-nodex/config:/app/config:ro
    read_only: true
    tmpfs: [ "/tmp" ]
    security_opt: [ "no-new-privileges:true" ]
    cap_drop: [ "ALL" ]
    extra_hosts:
      - "host.docker.internal:host-gateway"
```



</div>



## ๐ ุดุฑูุน ุจู ฺฉุงุฑ

<div dir="rtl">

### ุจุฑุง ูุตุจ ูุณุฎู ูุง ูุฎุชูู ุงุฒ ุงู ุงุณฺฉุฑูพุช ุงุณุชูุงุฏู ฺฉูุฏ

</div>

```bash
curl -sSL https://raw.githubusercontent.com/azavaxhuman/Nodex/refs/heads/main/main.sh -o main.sh && chmod +x main.sh && ./main.sh
```

#### ูพุณ ุงุฒ ุงุฌุฑุง ุดูุง ูุฑ ุจุงุฑ ูุชูุงูุฏ ุจุง ุฏุณุชูุฑ dds-nodex  ููู ุฑุง ูุฑุงุฎูุงู ฺฉูุฏ.


## โค๏ธ ุญูุงุช ูุงู (Donate)

ุงฺฏุฑ Nodex ุจุฑุง ุดูุง ููุฏ ุจูุฏุ ูโุชูุงูุฏ ุงุฒ ูพุฑูฺู ุญูุงุช ฺฉูุฏ:


| Cryptocurrency    | Wallet Address                                   |
| ----------------- | ------------------------------------------------ |
| USDT (BEP20)      | 0xFA231ce9128AC097F70F5efcfFb3d918645e1Ca9 |
| DogeCoin (DOGE)   | DRXjceAoxBRzNsNgVR3GduPSau4xiv179y               |
| TRON (TRX-TRC20 ) | TJWnK1fCcxwsemyYgYjebKnsBfofCFy3Pc               |






## ๐ง ูุญููู ฺฉุงุฑ (High-level)

<div dir="rtl">

1. **ููฺฏู ุจู ูพูู ูุฑฺฉุฒ ู ููุฏูุง** (Sessionูุง ูพุงุฏุงุฑ ุจุง TTL)
2. **ุฏุฑุงูุช ูุณุช ุงูุจุงูุฏูุง ุงุฒ ูุฑฺฉุฒ** โ ุงุนูุงู ุฑู ููุฏูุง (ุงูุฒูุฏู/ุจูโุฑูุฒุฑุณุงู ุฏุฑ ุตูุฑุช ุชุบุฑ)
3. **ุณูฺฉ ฺฉูุงูุชโูุง ุฏุงุฎู ูุฑ ุงูุจุงูุฏ** (ุงุฌุงุฏ/ุญุฐู/ุจูโุฑูุฒุฑุณุงู)
4. **ุชุฑุงูฺฉ**: Nodex ูุฌููุน ูุตุฑู ฺฉูุงูุช ุฑุง ุงุฒ ููุฏูุง ุฌูุน ูโฺฉูุฏ ู ุจูโุตูุฑุช ฺฉู ูุงุญุฏ ุจุฑุง ฺฉูุงูุช ูฺฏู ูโุฏุงุฑุฏ ู ุฑู ูููู ููุฏูุง ููฺฏุงู ูโฺฉูุฏ.
5. **SQLite + WAL**: ุฐุฎุฑูู ุญุงูุช/ูุตุฑู ุจุง ูููโฺฏุฐุงุฑ Thread-safe
6. **Healthcheck** ุจุฑ ูพุงูู ุชุงุฒู ุจูุฏู ูุงู `.heartbeat` ูุณุจุช ุจู `HEALTH_MAX_AGE`

</div>



## ๐ก๏ธ ูฺฉุงุช ุงููุช

<div dir="rtl">

- `read_only: true` + `no-new-privileges` + `cap_drop: ALL`
- ฺฉุงููฺฏ ุจูโุตูุฑุช ููุทโุฎูุงูุฏู ุฏุฑ ฺฉุงูุชูุฑ (`/app/config:ro`)

**ูพุดููุงุฏ**: Nodex ุฑุง ูพุดุช ฺฉ ุดุจฺฉูู ุฏุงุฎู Docker ุง ุณุฑูุฑ ุฏุงุฎู ููุงู ุดุจฺฉู/ุฏุชุงุณูุชุฑ ุจุง ูพููโูุง ูุฑุงุฑ ุฏูุฏ.

</div>



## ๐ ุนุจโุงุจ ู ูุงฺฏโูุง

<div dir="rtl">

### ูุดุงูุฏูู ูุงฺฏโูุง:

</div>

```bash
dds-nodex --logs
```
ุง ุงุฒ ุทุฑู ุงุฌุฑุง ุฏุณุชูุฑ dds-nodex ู ุงูุชุฎุงุจ ูุดุงูุฏู  ูุงฺฏ ูุง ุงุฒ ููู ูุชูุงูุฏ ูุงฺฏ ูุงุฑุง ุจู ุตูุฑุช ุฒูุฏู ูุดุงูุฏู ฺฉูุฏ.

<div dir="rtl">

### ูุนุงู ฺฉุฑุฏู ูุงฺฏ ูุงู:

ุฏุงุฎู `.env` ููุฏุงุฑ `ENABLE_FILE_LOG=1`  
ูุณุฑ ูุงฺฏ: `/var/lib/dds-nodex/data/sync.log`

### ูุดฺฉูุงุช ุฑุงุฌ:

- **401/403**: ูุงู ฺฉุงุฑุจุฑ/ุฑูุฒ ุง ูุณุฑ `WEBPATH` ุงุดุชุจุงู ุงุณุช.
- **Timeout**: `NET_REQUEST_TIMEOUT` ุฑุง ุจุงูุง ุจุจุฑุฏ ุง ุงุชุตุงู ุจู Nodex ู ุณุฑูุฑูุง ุฑุง ุจุฑุฑุณ ฺฉูุฏ.
- **Healthcheck Fail**: ููุฏุงุฑ `HEALTH_MAX_AGE` ฺฉู ุงุณุช ุง ุณูฺฉ ูพโุฏุฑูพ ุดฺฉุณุช ูโุฎูุฑุฏ (ูุงฺฏ ุฑุง ฺฺฉ ฺฉูุฏ).
- **DB Lock**: ูุถุง ุฏุณฺฉ/ูุฌูุฒ ูพูุดูู `data` ุฑุง ุจุฑุฑุณ ฺฉูุฏ.

</div>



## โ ูพุฑุณุดโูุง ูุชุฏุงูู

### ุขุง Nodex ุฏุงุฏูู ุงุตู ูพูู ุฑุง ุชุบุฑ ูโุฏูุฏุ
ุฎุฑุ Nodex ุจุง API ฺฉุงุฑ ูโฺฉูุฏ ู ุชุบุฑุงุช ุฑุง ุฏุฑ ุณุทุญ ุงูุจุงูุฏ/ฺฉูุงูุชโูุง ููุฏูุง ุงุนูุงู ูโฺฉูุฏ.

### ฺูุฏ ููุฏ ููุฒูุงู ูพุดุชุจุงู ูโุดูุฏุ
ุจูโุตูุฑุช ูพุดโูุฑุถ ููุงุฒโุณุงุฒ ูุนุงู ุงุณุชุ ุจุง `NET_MAX_WORKERS` ูโุชูุงูุฏ ูุชูุงุณุจ ุจุง ููุงุจุน ุงูุฒุงุด/ฺฉุงูุด ุฏูุฏ.

### ุงฺฏุฑ DB ูุฏู ุฏุงุฑูุ
Nodex ุฏุฑ ุดุฑูุนุ ุฏุฑ ุตูุฑุช ูุฌูุฏ DB ูุฏู ุฏุฑ ูุณุฑูุง ูุฏูุ ุขูโุฑุง ุจู ูุณุฑ ุฌุฏุฏ ููุงุฌุฑุช ูโุฏูุฏ (ุจูโููุฑุงู wal/shm).






## ๐ ูุงุณูุณ

ุงู ูพุฑูฺู ุชุญุช ูุฌูุฒ ููุชุดุฑ ุดุฏู ฺฉู ุฏุฑ ูุงู `LICENSE` ุขูุฏู ุงุณุช (ุฏุฑ ุตูุฑุช ุนุฏู ูุฌูุฏุ ูุทูุงู ูุฌูุฒ ูุฏูุธุฑุชุงู ุฑุง ุงุถุงูู ฺฉูุฏ).



## ๐งพ ุชุบุฑุงุช (Changelog)

### v1.3
- ุจูููโุณุงุฒ ููุงุฒโุณุงุฒ ุฏุฑุฎูุงุณุชโูุง
- Healthcheck ูุจุชู ุจุฑ `.heartbeat`
- PRAGMAูุง SQLite ูุงุจู ุชูุธู
- ุจูุจูุฏ ูุงฺฏูฺฏ
